# Open WebUI configuration for official Helm chart
# Reference: https://github.com/open-webui/helm-charts
open-webui:
  enabled: true

  ollama:
    enabled: false

  pipelines:
    enabled: false

  tika:
    enabled: false

  websocket:
    enabled: false

  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 100m
      memory: 512Mi

  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 1000
    runAsGroup: 1000
    fsGroup: 1000
    seccompProfile:
      type: RuntimeDefault

  containerSecurityContext:
    runAsNonRoot: true
    runAsUser: 1000
    runAsGroup: 1000
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: false
    capabilities:
      drop:
        - ALL
    seccompProfile:
      type: RuntimeDefault

  persistence:
    enabled: true
    storageClass: "longhorn"
    size: 2Gi
    accessModes:
      - ReadWriteOnce

  service:
    type: ClusterIP

  ingress:
    enabled: true
    ingressClassName: "traefik"
    annotations:
      kubernetes.io/ingress.class: traefik
    hosts:
      - host: ai.nezdemkovski.cloud
        paths:
          - path: /
            pathType: ImplementationSpecific

  extraEnvVars:
    - name: WEBUI_NAME
      value: "AI Assistant"
    - name: DEFAULT_USER_ROLE
      value: "user"
    - name: ENABLE_SIGNUP
      value: "true"
    - name: WEBUI_AUTH
      value: "true"

  nodeSelector: {}
