cloudflared:
  fullnameOverride: "cloudflared"

  image:
    repository: cloudflare/cloudflared
    tag: "2025.8.0"
    pullPolicy: IfNotPresent

  resources:
    limits:
      cpu: 100m
      memory: 128Mi
    requests:
      cpu: 10m
      memory: 64Mi

  # Disable health checks for cloudflared tunnel service
  # Cloudflared is a tunnel service that doesn't need traditional health checks
  # The service will restart automatically if it crashes
  livenessProbe: {}
  readinessProbe: {}

  # Security context
  podSecurityContext:
    runAsNonRoot: true
    runAsUser: 65532
    runAsGroup: 65532
    fsGroup: 65532
    seccompProfile:
      type: RuntimeDefault

  securityContext:
    allowPrivilegeEscalation: false
    readOnlyRootFilesystem: true
    runAsNonRoot: true
    runAsUser: 65532
    runAsGroup: 65532
    capabilities:
      drop:
        - ALL
